
#### without

	Предобрабатывает ряд, агрегация будет выполняться игнорируя метки указанные в 
	without

Есть временной ряд
```
node_filesystem_free_bytes{device="/dev/sda1",fstype="vfat",
instance="localhost:9100",job="node",mountpoint="/boot/efi"} 1

node_filesystem_free_bytes{device="/dev/sda5",fstype="ext4",
instance="localhost:9100",job="node",mountpoint="/"} 2
```

```PromQL
>>> sum without(device, fstype, mountpoint)
{instance="localhost:9100",job="node"} 3
```

#### by

	Антоним without делает совсем противоположное. Устанавливает метрики которые 
	необходимо выбрать из запроса

## Датчики

	Это моментальные снимки данных. Часто используются операции:
	- получение суммы
	- среднего
	- минимума или максимума

### changes
Показывает, сколько раз изменялось значение датчика

```PromQL
>>> changes(process_start_time_seconds[1h])
```

### deriv
Показывает, как быстро меняется датчик
```PromQL
>>> deriv(process_resident_memory_bytes[1h])
```

### predict_linear
Показывает, какое значение датчика будет через N времени, исходя из текущих тенденций

```PromQL
>>> predict_linear(node_filesystem_free_bytes{job="node"}[1h], 4 * 3600)
```

### delta
То же что `increase`
**Важно** очень чувствительна к выбросам

```PromQL
>>> delta(process_start_time_seconds[1h])
```

### idelta
Вычисляет разницу между двумя последними элементами

```PromQL
>>> idelta(process_start_time_seconds[1h])
```

## Счетчики

	Накапливают в себе значения с начала запуска. Часто используются операции:
	- скорость увеличения

### rate
Вычисляет скорость роста счетчика в заданном диапазоне

	Она делит изменение значения метрики на промежуток времени и возвращает 
	результат в единицах метрики за секунду

**Важно**
rate автоматически просчитывает `обнуления счетчика` если допустим есть временной ряд `[5,10,4,6]` то rate преобразует его в `[5,10,14,16]`


	При применении rate к вектору диапазона рекомендуется указывать интервал, 
	который по меньшей мере в четыре раза превышает интервал опроса.

Чтобы было как минимум две записи для анализа (допустим одна провалилась - а ещё одна из за этого не попала в интервал)

### increase
Вычисляет абсолютное изменение метрики в заданном диапазоне

### irate
Вычисляет скорость роста счетчика в двух последних точках

	Более легковестная. Очень чувствительна к всплескам и падениям

### resets
Показывает, сколько раз сбрасывался счетчик за определенный момент времени

## Сводные метрики

	Накапливают две метрики счетчика - sum и count. Очень удобны для:
	- подсчета среднего размера события (среднее количество байтов в ответе)


## Гистограммы

	Содержат распределение данных. Часто используются для:
	- получение квантилей
