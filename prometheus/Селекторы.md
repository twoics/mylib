
	Фильтрация в PromQL осуществляется с помощью селекторов


```PromQL
process_resident_memory_bytes{job="node"}
```
##  Сопоставители

А выражение `job="node"` - называется сопоставителем

- `=`
- `!=`
- `=~` - регулярка
- `!~` - не равно регулярке


	Хотя бы одно сопоставление в селекторе должно выполнится

## Мгновенный вектор

Возвращает текущие (самые последние) значения метрик, разделенные по меткам

| Название                                                                             | Метрика |
| ------------------------------------------------------------------------------------ | ------- |
| process_cpu_seconds_total{instance="server:8000", job="website-constructor-backend"} | 0.59    |
| process_cpu_seconds_total{instance="localhost:9090", job="prometheus"}               | 7.43    |


## Вектор диапазона

Возвращает значения метрик за какой-то диапазон

| Метрики                                                                              | Метрика / Время                                                                                                    |
| ------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------ |
| process_cpu_seconds_total{instance="server:8000", job="website-constructor-backend"} | 0.75 @1708832794.504  <br>0.76 @1708832809.504  <br>0.77 @1708832824.506  <br>0.79 @1708832839.504                 |
| process_cpu_seconds_total{instance="localhost:9090", job="prometheus"}               | 12.36 @1708832800.219  <br>12.16 @1708832815.217  <br>12.68 @1708832830.217  <br>13.02 @1708832845.217<br><br><br> |

**Важно** 
Как видно, шаг получения метрик - 15 сек. Однако важно заметить, что с разных целей `Prometheus` собирает значения в **разном временном диапазоне**

##### usage
Часто используются, но обычно в составе какой-либо операции (rate и тд), а не в сыром виде



## Подзапросы

	Векторы диапазонов нельзя использовать с функциями


Анализируем запрос
```PromQL
max_over_time( rate(http_requests_total[5m])[30m:1m] )
```

- Он будет вызывать `rate(http_requests_total[5m])` каждую **минуту** (1m)
- В течение **30 минут** (30m)
- А потом отдаст результат `max_over_time`

